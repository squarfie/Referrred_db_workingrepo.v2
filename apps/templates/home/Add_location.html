{% extends 'layouts/base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %} Add New Location {% endblock title %}

{% block stylesheets %}
<link rel="stylesheet" href="{% static 'assets/css/arsp.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/header.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/settings.css' %}">
{% endblock stylesheets %}

{% block content %}

<body>

<!-- ================================================
     HEADER SECTION (Uses header.css styles)
================================================ -->
<div class="header-container">
    <div class="header-content">
        <h1>Add New Location</h1>
        <p>Register new provinces and cities to the system database.</p>

        <div class="badge-group">
            <div class="badge"><span class="badge-icon">üìç</span>Location Setup</div>
            <div class="badge"><span class="badge-icon">‚¨ÜÔ∏è</span>CSV Upload</div>
        </div>
    </div>
</div>

<!-- ================================================
     MAIN CONTENT
================================================ -->
<div class="container mt-5">

    <div class="text-right mb-3">
        <a href="{% url 'view_locations' %}" class="btn btn-secondary">View All</a>
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#uploadModal">
            Upload
        </button>
    </div>

    <div class="card form-card p-4">
        <!-- Form begin -->
        <form method="POST" action="{% url 'add_location' %}" autocomplete="on" id="dropdownform">
            {% csrf_token %}

            <div class="row">
                <!-- Province -->
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="form-control-label">Enter Province:</label>
                        {{ form.province|add_class:"form-control" }}
                    </div>
                </div>

                <!-- City -->
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="form-control-label">City:</label>
                        {{ form.cityname|add_class:"form-control" }}
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-secondary" onclick="history.back()">Back</button>
                <button type="button" class="btn btn-success" onclick="refresh()">Clear</button>
            </div>
        </form>
        <!-- Form end -->
    </div>
</div>

<!-- ================================================
     UPLOAD MODAL (Uses settings.css modal theme)
================================================ -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="UploadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h6 class="modal-title">Upload Cities</h6>
                <button type="button" class="close btn-close" data-dismiss="modal" aria-label="Close"></button>
            </div>

            <form method="POST" enctype="multipart/form-data" action="{% url 'upload_locations' %}">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="form-group">
                        <label>Upload CSV/Excel File</label>
                        {{ upload_form.file|add_class:"form-control" }}
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Upload File</button>
                </div>
            </form>

        </div>
    </div>
</div>

<script>
function refresh() {
    document.getElementById("dropdownform").reset();
}
</script>

</body>

{% endblock content %}
